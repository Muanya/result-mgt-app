<!-- layout.component.html -->
<mat-sidenav-container class="layout-container" [class.mobile]="isMobile">
  <!-- Sidebar -->
  <mat-sidenav #sidenav 
               [mode]="isMobile ? 'over' : 'side'" 
               [opened]="!isMobile"
               [class.collapsed]="isSidebarCollapsed && !isMobile"
               class="sidebar">
    
    <div class="sidebar-header">
      <div class="logo-container">
        <mat-icon class="logo-icon">school</mat-icon>
        <span class="logo-text" [class.hidden]="isSidebarCollapsed">RMS</span>
      </div>
      <button mat-icon-button 
              class="collapse-btn" 
              (click)="toggleSidebar()"
              matTooltip="Collapse sidebar">
        <mat-icon>keyboard_arrow_left</mat-icon>
      </button>
    </div>

    <mat-nav-list class="nav-list">
      <a mat-list-item 
         *ngFor="let item of navigationItems"
         [routerLink]="item.path" 
         routerLinkActive="active"
         class="nav-item">
        <mat-icon class="nav-icon" 
                  matListItemIcon>{{item.icon}}</mat-icon>
        <span class="nav-label" 
              [class.hidden]="isSidebarCollapsed">{{item.label}}</span>
        
        <span *ngIf="item.badge && !isSidebarCollapsed" 
              class="badge"
              [class]="item.path === 'messages' ? 'badge-warn' : 'badge-primary'">
          {{item.badge > 99 ? '99+' : item.badge}}
        </span>
      </a>
    </mat-nav-list>

    <div class="sidebar-footer" [class.hidden]="isSidebarCollapsed">
      <div class="user-info">
        <mat-icon>account_circle</mat-icon>
        <div class="user-details">
          <span class="user-name">Admin User</span>
          <span class="user-role">Administrator</span>
        </div>
      </div>
    </div>
  </mat-sidenav>

  <!-- Main Content -->
  <mat-sidenav-content>
    <mat-toolbar color="primary" class="topbar">
      <button mat-icon-button 
              (click)="toggleSidebar()" 
              class="toggle-btn"
              matTooltip="Toggle sidebar">
        <mat-icon>menu</mat-icon>
      </button>

      <div class="breadcrumb">
        <span class="app-title">CEFI</span>
        <mat-icon>chevron_right</mat-icon>
        <span class="current-page">Dashboard</span>
      </div>

      <span class="flex-spacer"></span>

      <div class="topbar-actions">
        
        <button mat-icon-button class="action-btn" matTooltip="Search">
          <mat-icon>search</mat-icon>
        </button>

        <button mat-icon-button class="action-btn" matTooltip="Settings">
          <mat-icon>settings</mat-icon>
        </button>

         <button (click)="logout()" mat-icon-button class="action-btn" matTooltip="Logout">
          <mat-icon>logout</mat-icon>
        </button>

        <div class="user-menu">
          <button mat-button class="user-btn">
            <mat-icon>account_circle</mat-icon>
            <span>Magister</span>
            <mat-icon>arrow_drop_down</mat-icon>
          </button>
        </div>

      </div>
    </mat-toolbar>

    <div class="contentWrapper">
      <router-outlet></router-outlet>
    </div>

    <!-- Footer -->
    <footer class="footer">
      <div class="footer-content">
        <span>&copy; {{currentYear}} Student Management System. All rights reserved.</span>
        <div class="footer-links">
          <a href="#">Privacy Policy</a>
          <a href="#">Terms of Service</a>
          <a href="#">Help Center</a>
        </div>
      </div>
    </footer>
  </mat-sidenav-content>
</mat-sidenav-container>